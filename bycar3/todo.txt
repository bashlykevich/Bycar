- SLQ-скрипт просчета поля XML для всех запчастей
- подсчет количества остатков в фон



Проблема с долгой стартовой загрузкой (50 минут на все ~540к записей) при загрузке-подсчете XML-поля по складам:
Надо:
- в окне Revision3EditView.xaml для каджой запчасти иметь подсчитанное xml-поле для быстрого отображения по складам - РЕАЛИЗОВАНО.
- быстро программу загружать в начале -> быстрое выполнение SQL-функции SelectSpares - ПРОБЛЕМА!

Решения:
1. рассчитывать xml-поле только для отображаемых записей, для каждой отображаемой записи запрос к БД
2. по умолчанию у всех записей сразу инициализировано одинаковое xml-поле, затем в SQL-скрипте оно заполняется для тех записей, для которох ЕСТЬ ПОСТУПЛЕНИЯ
3. xml-поле постоянно хранится в базе, при каждом изменении количества запчасти изменять и это поле

Наиболее удобный вариант - 3.
Шаги:
1. Инициализировать поле для всех записей в базе нулевым значением.
2. Добавить обработчик на добавление нового склада - добавление еще одного столбца в xml-поле.
3. Имзенение xml-поля запчасти при добавлении-редактировании-удалении поступления
4. Изменение xml-поля запчасти при изменении значения при инвентаризации
5. Стартовая инициализация поля при создании запчасти



- убраны предупреждения
- Закрывается программа - когда вздумается



